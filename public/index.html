<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìù H·ªá Th·ªëng Ch·∫•m Phi·∫øu Tr·∫Øc Nghi·ªám OMR</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìù</text></svg>">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üìù H·ªá Th·ªëng Ch·∫•m Phi·∫øu Tr·∫Øc Nghi·ªám</h1>
            <p class="subtitle">H·ªó tr·ª£ 4 m√£ ƒë·ªÅ: 101, 102, 103, 104 | T·ª± ƒë·ªông nh·∫≠n di·ªán v√† ch·∫•m ƒëi·ªÉm</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Upload Section -->
            <section class="upload-section">
                <div class="card">
                    <h2>üì§ Upload Phi·∫øu Tr·∫Øc Nghi·ªám</h2>
                    
                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="fileInput" accept="image/jpeg,image/jpg,image/png" hidden>
                        <div class="upload-content">
                            <div class="upload-icon">üì∑</div>
                            <p class="upload-text">K√©o th·∫£ ·∫£nh v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn file</p>
                            <p class="upload-hint">Ch·∫•p nh·∫≠n: JPG, JPEG, PNG (t·ªëi ƒëa 10MB)</p>
                        </div>
                    </div>

                    <!-- Preview Image -->
                    <div id="imagePreview" class="image-preview" style="display: none;">
                        <img id="previewImg" src="" alt="Preview">
                        <button class="btn-remove" id="btnRemove">‚úñ X√≥a ·∫£nh</button>
                    </div>

                    <!-- Custom Answer Key -->
                    <div class="custom-answer-section">
                        <details>
                            <summary>üìã Nh·∫≠p ƒë√°p √°n t√πy ch·ªânh (t√πy ch·ªçn)</summary>
                            <div class="custom-answer-content">
                                <textarea 
                                    id="customAnswerKey" 
                                    rows="3" 
                                    placeholder="Nh·∫≠p 35 ƒë√°p √°n, c√°ch nhau b·ªüi d·∫•u ph·∫©y. V√≠ d·ª•: A,B,C,D,A,B,C,D,..."
                                ></textarea>
                                <p class="hint">üí° N·∫øu kh√¥ng nh·∫≠p, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ch·ªçn ƒë√°p √°n theo m√£ ƒë·ªÅ</p>
                            </div>
                        </details>
                    </div>

                    <!-- Process Button -->
                    <button class="btn-primary" id="btnProcess" disabled>
                        üéØ Ch·∫•m ƒêi·ªÉm
                    </button>

                    <!-- Loading -->
                    <div id="loading" class="loading" style="display: none;">
                        <div class="spinner"></div>
                        <p>ƒêang x·ª≠ l√Ω phi·∫øu tr·∫Øc nghi·ªám...</p>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="card">
                    <h2>‚úÖ K·∫øt Qu·∫£ Ch·∫•m ƒêi·ªÉm</h2>
                    
                    <!-- Images Grid -->
                    <div class="images-grid-three">
                        <div class="image-card">
                            <h3>üì∑ ·∫¢nh G·ªëc</h3>
                            <img id="originalImage" src="" alt="Original">
                        </div>
                        <div class="image-card">
                            <h3>üîç V√πng Detect</h3>
                            <img id="debugImage" src="" alt="Debug">
                            <p class="image-caption">
                                üîµ M√£ ƒë·ªÅ | üü¢ Q1-10 | üü° Q11-20 | üü£ Q21-30 | üü† Q31-40
                            </p>
                        </div>
                        <div class="image-card">
                            <h3>‚úÖ K·∫øt Qu·∫£ Ch·∫•m</h3>
                            <img id="resultImage" src="" alt="Result">
                            <p class="image-caption">
                                üü¢ ƒê√∫ng | üî¥ Sai | üü° ƒê√°p √°n ƒë√∫ng | üü† T√¥ nhi·ªÅu
                            </p>
                        </div>
                    </div>
                    
                    <!-- Summary Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìù</div>
                            <div class="stat-content">
                                <div class="stat-label">M√£ ƒë·ªÅ</div>
                                <div class="stat-value" id="statMaDe">-</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚úì</div>
                            <div class="stat-content">
                                <div class="stat-label">S·ªë c√¢u ƒë√∫ng</div>
                                <div class="stat-value" id="statCorrect">-</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-content">
                                <div class="stat-label">ƒêi·ªÉm s·ªë</div>
                                <div class="stat-value" id="statScore">-</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üèÜ</div>
                            <div class="stat-content">
                                <div class="stat-label">X·∫øp lo·∫°i</div>
                                <div class="stat-value" id="statGrade">-</div>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                        <div class="progress-text" id="progressText">0%</div>
                    </div>

                    <!-- Warning for multiple marks -->
                    <div id="warningMultiple" class="alert alert-warning" style="display: none;">
                        ‚ö†Ô∏è <strong>C·∫£nh b√°o:</strong> C√≥ <span id="multipleCount">0</span> c√¢u t√¥ nhi·ªÅu ƒë√°p √°n: <span id="multipleList"></span>
                    </div>

                    <!-- Details Table -->
                    <details open>
                        <summary>üìã Chi ti·∫øt t·ª´ng c√¢u</summary>
                        <div class="details-grid" id="detailsGrid">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </details>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="btn-secondary" id="btnNew">üì§ Ch·∫•m phi·∫øu kh√°c</button>
                        <button class="btn-secondary" id="btnPrint">üñ®Ô∏è In k·∫øt qu·∫£</button>
                    </div>
                </div>
            </section>

            <!-- Error Section -->
            <section class="error-section" id="errorSection" style="display: none;">
                <div class="card error-card">
                    <h2>‚ùå L·ªói</h2>
                    <p id="errorMessage"></p>
                    <button class="btn-secondary" id="btnRetry">üîÑ Th·ª≠ l·∫°i</button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>üí° <strong>H∆∞·ªõng d·∫´n:</strong> Ch·ª•p phi·∫øu r√µ r√†ng, g√≥c th·∫≥ng (&lt;30¬∞), √°nh s√°ng t·ªët. T√¥ r√µ m√£ ƒë·ªÅ v√† ch·ªâ t√¥ 1 ƒë√°p √°n/c√¢u.</p>
                <p class="footer-meta">OMR Sheet Evaluation System v2.0 | H·ªó tr·ª£ 4 m√£ ƒë·ªÅ | ¬© 2026</p>
            </div>
        </footer>

        <!-- Info Panel -->
        <aside class="info-panel">
            <h3>üìö Th√¥ng Tin M√£ ƒê·ªÅ</h3>
            <div class="info-content">
                <p><strong>M√£ ƒë·ªÅ 101:</strong> A=9, B=9, C=5, D=12</p>
                <p><strong>M√£ ƒë·ªÅ 102:</strong> A=10, B=9, C=6, D=10</p>
                <p><strong>M√£ ƒë·ªÅ 103:</strong> A=10, B=4, C=12, D=9</p>
                <p><strong>M√£ ƒë·ªÅ 104:</strong> A=11, B=7, C=7, D=10</p>
            </div>
            <div class="info-tips">
                <h4>üí° M·∫πo Ch·ª•p ·∫¢nh T·ªët:</h4>
                <ul>
                    <li>‚úì Kho·∫£ng c√°ch 30-40cm</li>
                    <li>‚úì √Ånh s√°ng t·ª´ tr√™n xu·ªëng</li>
                    <li>‚úì G√≥c th·∫≥ng ho·∫∑c l·ªách &lt;20¬∞</li>
                    <li>‚úì To√†n b·ªô phi·∫øu trong khung</li>
                </ul>
            </div>
        </aside>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>

